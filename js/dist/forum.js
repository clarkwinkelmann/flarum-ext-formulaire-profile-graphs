(()=>{var r={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},d:(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(r,e)=>Object.prototype.hasOwnProperty.call(r,e),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};(()=>{"use strict";r.r(e);const t=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/app"];var a=r.n(o);const i=flarum.core.compat["common/components/LinkButton"];var n=r.n(i);const l=flarum.core.compat["forum/ForumApplication"];var s=r.n(l);const u=flarum.core.compat["forum/components/UserPage"];var p=r.n(u);function f(r,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},f(r,e)}const c=flarum.core.compat["common/components/Switch"];var h=r.n(c);const d=flarum.core.compat["common/components/LoadingIndicator"];var g=r.n(d);const y=flarum.core.compat["common/helpers/icon"];var v=r.n(y);const b=flarum.core.compat["common/utils/extractText"];var P=r.n(b),G=function(r){var e,t;function o(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=r.call.apply(r,[this].concat(o))||this).saving=!1,e.saved=!1,e.graphLoaded=!1,e}t=r,(e=o).prototype=Object.create(t.prototype),e.prototype.constructor=e,f(e,t);var i=o.prototype;return i.oninit=function(e){var t=this;if(r.prototype.oninit.call(this,e),this.loadUser(m.route.param("username")),!window.Plotly){var o=document.createElement("script");o.crossOrigin="anonymous",o.integrity="sha256-VmyeSwOmMUgMXMDjfU7ouLhV/EFZuOiE/f6CfSpLujw=",o.src="https://cdn.jsdelivr.net/npm/plotly.js@2.14.0/dist/plotly.min.js",o.onload=function(){t.loadGraph()},document.body.appendChild(o)}},i.oncreate=function(e){r.prototype.oncreate.call(this,e),this.loadGraph()},i.show=function(e){r.prototype.show.call(this,e),a().setTitle(P()(a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.title"))),this.loadGraph()},i.loadGraph=function(){if(window.Plotly&&this.element&&this.user&&!this.graphLoaded){this.graphLoaded=!0;var r=this.element.querySelector(".js-formulaire-profile-graph-plotly");if(r){var e=[],t=[];(this.user.attribute("formulaireGraphsData")||[]).forEach((function(r){e.push(r[0]),t.push(r[1])})),Plotly.newPlot(r,[{x:e,y:t}],{height:500,margin:{t:20,b:50},xaxis:{title:{text:this.user.attribute("formulaireGraphsXLabel")}},yaxis:{title:{text:this.user.attribute("formulaireGraphsYLabel")}}});var o=this.element.querySelector(".js-formulaire-profile-graph-spinner");o instanceof HTMLElement&&(o.style.display="none")}}},i.content=function(){var r=this;if(!this.user.attribute("formulaireGraphsVisible"))return m(".FormulaireProfileGraphsContent",[m(".FormulaireProfileGraphsInvisible",a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.invisible"))]);var e=a().forum.attribute("formulaire-profile-graphs.editForm");return m(".FormulaireProfileGraphsContent",[this.user.attribute("formulaireGraphsCanChangeVisibility")?m(".FormulaireProfileGraphsSettings",[h().component({state:this.user.attribute("formulaireGraphsPublic"),onchange:function(e){r.saving=!0,r.user.save({formulaireGraphsPublic:e}).then((function(){r.saving=!1,r.saved=!0,m.redraw(),setTimeout((function(){r.saved=!1,m.redraw()}),4e3)})).catch((function(e){throw r.saving=!1,m.redraw(),e}))}},a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.makePublic")),this.saving?m(".FormulaireProfileGraphsSettingsSaving",g().component({display:"inline"})):this.saved?m(".FormulaireProfileGraphsSettingsSaving",v()("fas fa-check")):null]):null,m(".FormulaireProfileGraphsTitle",m("h3",a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.header"))),m(".FormulaireProfileGraphsData",[m(".FormulaireProfileGraphsDataLoading.js-formulaire-profile-graph-spinner",g().component()),m(".FormulaireProfileGraphsDataPlotly.js-formulaire-profile-graph-plotly")]),this.user===a().session.user&&e?m(".FormulaireProfileGraphsEdit",n().component({className:"Button",href:a().route("formulaireProfile",{username:this.user.username(),form:e}),icon:"fas fa-pen"},a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.editForm"))):null])},o}(p());a().initializers.add("clarkwinkelmann-formulaire-profile-graphs",(function(){a().routes.formulaireProfileGraphs={path:"/u/:username/formulaire-graphs",component:G},(0,t.override)(s().prototype,"mount",(function(r){a().routes.formulaireProfileGraphs.path="/u/:username/"+a().forum.attribute("formulaire-profile-graphs.path");for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];r.call.apply(r,[this].concat(t))})),(0,t.extend)(p().prototype,"navItems",(function(r){this.user.attribute("formulaireGraphsVisible")&&r.add("formulaire-graphs",n().component({href:a().route("formulaireProfileGraphs",{username:this.user.slug()}),icon:a().forum.attribute("formulaire-profile-graphs.icon")},a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.nav")),a().forum.attribute("formulaire-profile-graphs.navPriority"))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map