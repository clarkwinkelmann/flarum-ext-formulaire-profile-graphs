(()=>{var r={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},d:(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:(r,t)=>Object.prototype.hasOwnProperty.call(r,t),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};(()=>{"use strict";r.r(t);const e=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/app"];var a=r.n(o);const n=flarum.core.compat["common/components/LinkButton"];var i=r.n(n);const l=flarum.core.compat["forum/ForumApplication"];var s=r.n(l);const u=flarum.core.compat["forum/components/UserPage"];var p=r.n(u);function c(r,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},c(r,t)}const f=flarum.core.compat["common/components/Switch"];var h=r.n(f);const d=flarum.core.compat["common/components/LoadingIndicator"];var v=r.n(d);const g=flarum.core.compat["common/helpers/icon"];var y=r.n(g);const b=flarum.core.compat["common/utils/extractText"];var P=r.n(b),w=function(r){var t,e;function o(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=r.call.apply(r,[this].concat(o))||this).saving=!1,t.saved=!1,t.graphLoaded=!1,t.callbackForPlotlyLoaded=null,t}e=r,(t=o).prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e);var n=o.prototype;return n.oninit=function(t){var e=this;if(r.prototype.oninit.call(this,t),this.loadUser(m.route.param("username")),!window.Plotly){var o=document.createElement("script");o.crossOrigin="anonymous",o.integrity="sha256-VmyeSwOmMUgMXMDjfU7ouLhV/EFZuOiE/f6CfSpLujw=",o.src="https://cdn.jsdelivr.net/npm/plotly.js@2.14.0/dist/plotly.min.js",o.onload=function(){e.loadGraph()},document.body.appendChild(o)}},n.oncreate=function(t){r.prototype.oncreate.call(this,t),this.loadGraph()},n.show=function(t){r.prototype.show.call(this,t),a().setTitle(P()(a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.title"))),this.loadGraph()},n.loadGraph=function(){if(window.Plotly&&this.element&&this.user&&!this.graphLoaded){this.graphLoaded=!0;var r=this.element.querySelector(".js-formulaire-profile-graph");if(r){var t=[],e=[];(this.user.attribute("formulaireGraphsData")||[]).forEach((function(r){t.push(r[0]),e.push(r[1])})),Plotly.newPlot(r,[{x:t,y:e}],{margin:{t:0},xaxis:{title:{text:this.user.attribute("formulaireGraphsXLabel")}},yaxis:{title:{text:this.user.attribute("formulaireGraphsYLabel")}}})}}},n.content=function(){var r=this;if(!this.user.attribute("formulaireGraphsVisible"))return m(".FormulaireProfileGraphsContent",[m(".FormulaireProfileGraphsInvisible",a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.invisible"))]);var t=a().forum.attribute("formulaire-profile-graphs.editForm");return m(".FormulaireProfileGraphsContent",[m(".FormulaireProfileGraphsData.js-formulaire-profile-graph"),this.user===a().session.user&&t?m(".FormulaireProfileGraphsEdit",i().component({className:"Button",href:a().route("formulaireProfile",{username:this.user.username(),form:t})},a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.editForm"))):null,this.user.attribute("formulaireGraphsCanChangeVisibility")?m(".FormulaireProfileGraphsSettings",[h().component({state:this.user.attribute("formulaireGraphsPublic"),onchange:function(t){r.saving=!0,r.user.save({formulaireGraphsPublic:t}).then((function(){r.saving=!1,r.saved=!0,m.redraw(),setTimeout((function(){r.saved=!1,m.redraw()}),4e3)})).catch((function(t){throw r.saving=!1,m.redraw(),t}))}},a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.makePublic")),this.saving?v().component():this.saved?y()("fas fa-check"):null]):null])},o}(p());a().initializers.add("clarkwinkelmann-formulaire-profile-graphs",(function(){a().routes.formulaireProfileGraphs={path:"/u/:username/formulaire-graphs",component:w},(0,e.override)(s().prototype,"mount",(function(r){a().routes.formulaireProfileGraphs.path="/u/:username/"+a().forum.attribute("formulaire-profile-graphs.path");for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];r.call.apply(r,[this].concat(e))})),(0,e.extend)(p().prototype,"navItems",(function(r){this.user.attribute("formulaireGraphsVisible")&&r.add("formulaire-graphs",i().component({href:a().route("formulaireProfileGraphs",{username:this.user.slug()}),icon:a().forum.attribute("formulaire-profile-graphs.icon")},a().translator.trans("clarkwinkelmann-formulaire-profile-graphs.forum.nav")),a().forum.attribute("formulaire-profile-graphs.navPriority"))}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map